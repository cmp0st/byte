version: v2
inputs:
- directory: proto
plugins:
# Golang
- remote: buf.build/protocolbuffers/go
  out: gen
  opt: paths=source_relative
- remote: buf.build/connectrpc/go
  out: gen
  opt: paths=source_relative
# Swift
- remote: buf.build/apple/swift
  out: swift/Sources/ByteClient/Generated
  opt: Visibility=Public
- remote: buf.build/connectrpc/swift
  out: swift/Sources/ByteClient/Generated
  opt:
  - GenerateAsyncMethods=true
  - GenerateCallbackMethods=false
  - Visibility=Public
- remote: buf.build/connectrpc/swift-mocks
  out: swift/Sources/ByteClient/GeneratedMocks
  opt:
  - GenerateAsyncMethods=true
  - GenerateCallbackMethods=false
  - Visibility=Public
managed:
  enabled: true
  override:
  - file_option: go_package_prefix
    value: github.com/cmp0st/byte/gen
  disable:
  - file_option: go_package
    module: buf.build/bufbuild/protovalidate
